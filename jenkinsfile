pipeline {
    agent any
    
    stages {
        stage('Build') {
            steps {
                // Checkout du code depuis votre référentiel git, par exemple
                git 'https://github.com/Achrafkhaterchi/Demo_Vnet.git'
                
                sh 'python3 --version'
                // Installation des dépendances Python (si nécessaire)
                //sh 'python3 install -r requirements.txt'
                
                // Exécution du script Python
                sh 'python3 vnet/Vnet.py vnet/templates/vnet.xlsx vnet/templates/vnet.j2'
                
                // Vous pouvez aussi passer des arguments comme des variables d'environnement
                // sh 'python mon_script.py $FICHIER_EXCEL $TEMPLATE_J2'
                
                // Si votre script génère un fichier de sortie, vous pouvez l'archiver
                archiveArtifacts 'variables.tfvars'
            }
        }
    }
    
    post {
      success {
          echo 'Le script s\'est exécuté avec succès !'
        }
    }
}
